d bin dev etc mnt proc sys tmp
d var/run var/spool var/lock var/tmp var/adm/mount
d var/lib/dhcpcd var/lib/hardware/unique-keys var/lib/autoinstall
d var/run/dbus var/run/hal var/run/hotplug var/cache/fontconfig

d etc/sysconfig
d etc/sysconfig/hardware


d lib/modules/<kernel_ver>
d lib/modules/<kernel_mods>/initrd
s lib/modules/<kernel_mods>/initrd modules
s ../<kernel_mods> lib/modules/<kernel_ver>/updates

d mounts
d root
d download

t var/run/utmp

c 1777 0 0 tmp

e cp -a /dev/{null,zero,console,ram0,tty[1349]} dev
# historical static device nodes
x devz /devz

glibc:
  /etc/nsswitch.conf

  linuxrc:
    if linuxrc
      if linuxrc =~ m#^[^/]#
        m /usr/sbin/<linuxrc> /linuxrc
      else
        X <linuxrc> /linuxrc
      endif
    else
      m /usr/sbin/linuxrc /linuxrc
    endif

  if initramfs
    l linuxrc init
    r linuxrc
  endif

  x etc/syslog.conf etc

module-init-tools:
  /sbin/insmod
  /sbin/modprobe

x etc/host.conf etc

##if arch ne 's390' && arch ne 's390x' && arch ne 'ppc' && arch ne 'ppc64'

kbd:
  /bin/dumpkeys
  /bin/loadkeys
  /bin/setfont
  /bin/setleds

  d usr/share/kbd/consoletrans
  m /usr/share/kbd/consoletrans/koi2alt usr/share/kbd/consoletrans
  m /usr/share/kbd/consoletrans/trivial usr/share/kbd/consoletrans

  d usr/share/kbd/consolefonts

  g /usr/share/kbd/consolefonts/LatArCyrHeb-16.psfu.gz usr/share/kbd/consolefonts/LatArCyrHeb-16.psfu
  g /usr/share/kbd/consolefonts/lat1-16.psfu.gz usr/share/kbd/consolefonts/lat1-16.psfu
  g /usr/share/kbd/consolefonts/lat2-16.psfu.gz usr/share/kbd/consolefonts/lat2-16.psfu
  g /usr/share/kbd/consolefonts/iso07u-16.psfu.gz usr/share/kbd/consolefonts/lat7-16.psfu
  g /usr/share/kbd/consolefonts/Cyr_a8x16.psfu.gz usr/share/kbd/consolefonts/Cyr_a8x16.psfu

linuxrc:
  g /usr/share/linuxrc/linuxrc-16.psfu.gz usr/share/kbd/consolefonts/linuxrc-16.psfu
  g /usr/share/linuxrc/linuxrc2-16.psfu.gz usr/share/kbd/consolefonts/linuxrc2-16.psfu

kbd:
  d usr/share/kbd/keymaps/include
  m usr/share/kbd/keymaps/include/compose.latin1 usr/share/kbd/keymaps/include

##if arch eq 'ia32' || arch eq 'x86_64' || arch eq 'ppc' || arch eq 'ia64' || arch eq 'mips'
##  if !fewkeymaps
    g /usr/share/kbd/keymaps/i386/qwerty/Pl02.map.gz usr/share/kbd/keymaps/Pl02.map
    g /usr/share/kbd/keymaps/i386/qwerty/br-abnt2.map.gz usr/share/kbd/keymaps/br-abnt2.map
    g /usr/share/kbd/keymaps/i386/qwertz/cz-us-qwertz.map.gz usr/share/kbd/keymaps/cz-us-qwertz.map
    g /usr/share/kbd/keymaps/i386/qwerty/dk.map.gz usr/share/kbd/keymaps/dk.map
    g /usr/share/kbd/keymaps/i386/qwerty/es.map.gz usr/share/kbd/keymaps/es.map
    g /usr/share/kbd/keymaps/i386/qwerty/gr.map.gz usr/share/kbd/keymaps/gr.map
    g /usr/share/kbd/keymaps/i386/qwertz/hu.map.gz usr/share/kbd/keymaps/hu.map
    g /usr/share/kbd/keymaps/i386/qwerty/it.map.gz usr/share/kbd/keymaps/it.map
    g /usr/share/kbd/keymaps/i386/qwerty/jp106.map.gz usr/share/kbd/keymaps/jp106.map
    g /usr/share/kbd/keymaps/i386/qwerty/nl.map.gz usr/share/kbd/keymaps/nl.map
    g /usr/share/kbd/keymaps/i386/qwerty/no-latin1.map.gz usr/share/kbd/keymaps/no-latin1.map
    g /usr/share/kbd/keymaps/i386/qwerty/pt-latin1.map.gz usr/share/kbd/keymaps/pt-latin1.map
    g /usr/share/kbd/keymaps/i386/qwerty/ru1.map.gz usr/share/kbd/keymaps/ru1.map
    g /usr/share/kbd/keymaps/i386/qwerty/sk-qwerty.map.gz usr/share/kbd/keymaps/sk-qwerty.map
    g /usr/share/kbd/keymaps/i386/qwertz/slovene.map.gz usr/share/kbd/keymaps/slovene.map
    g /usr/share/kbd/keymaps/i386/qwerty/sv-latin1.map.gz usr/share/kbd/keymaps/sv-latin1.map
    g /usr/share/kbd/keymaps/i386/qwerty/fi-latin1.map.gz usr/share/kbd/keymaps/fi-latin1.map
    g /usr/share/kbd/keymaps/i386/qwerty/uk.map.gz usr/share/kbd/keymaps/uk.map
    g /usr/share/kbd/keymaps/i386/azerty/fr-latin1.map.gz usr/share/kbd/keymaps/fr-latin1.map
    g /usr/share/kbd/keymaps/i386/azerty/be-latin1.map.gz usr/share/kbd/keymaps/be-latin1.map

    m /usr/share/kbd/keymaps/i386/include/linux-with-modeshift-altgr.inc usr/share/kbd/keymaps/include
    m /usr/share/kbd/keymaps/i386/include/linux-keys-extd.inc usr/share/kbd/keymaps/include
    m /usr/share/kbd/keymaps/i386/include/azerty-layout.inc usr/share/kbd/keymaps/include
    m /usr/share/kbd/keymaps/i386/include/linux-with-two-alt-keys.inc usr/share/kbd/keymaps/include
##  endif

  g /usr/share/kbd/keymaps/i386/qwerty/us.map.gz usr/share/kbd/keymaps/us.map
  g /usr/share/kbd/keymaps/i386/qwertz/de-latin1-nodeadkeys.map.gz usr/share/kbd/keymaps/de-lat1-nd.map
  g /usr/share/kbd/keymaps/i386/qwertz/de-latin1.map.gz usr/share/kbd/keymaps/de-latin1.map

  m /usr/share/kbd/keymaps/i386/include/linux-keys-bare.inc usr/share/kbd/keymaps/include
  m /usr/share/kbd/keymaps/i386/include/linux-with-alt-and-altgr.inc usr/share/kbd/keymaps/include
  m /usr/share/kbd/keymaps/i386/include/qwerty-layout.inc usr/share/kbd/keymaps/include
  m /usr/share/kbd/keymaps/i386/include/qwertz-layout.inc usr/share/kbd/keymaps/include
  g /usr/share/kbd/keymaps/i386/include/euro1.map.gz usr/share/kbd/keymaps/include/euro1.map
  g /usr/share/kbd/keymaps/i386/include/euro2.map.gz usr/share/kbd/keymaps/include/euro2.map
##endif


d bin lib

glibc:
  /lib*/libpthread{.,-}*

#    pam:
#      /lib*/libpam.so.*

#    cups-libs:
#      m /usr/lib*/libcups.so.* /lib

openssl:
  m /usr/lib*/libcrypto.so.* /lib
  m /usr/lib*/libssl.so.* /lib

    
e2fsprogs:
  m /lib*/lib*.so.* /lib

grub:
  /boot/*
  /usr/lib/*
  /usr/sbin/*

libcom_err:
  m /lib*/libcom_err.so.* /lib
  m /lib*/libss.so.* /lib


sed:
  /bin/sed

##if 0
##if with_gdb

  kbd:
   /bin/kbd_mode

  iputils:
    /bin/ping

  net-tools:
    m /sbin/{ifconfig,route} /bin

#!  strace:
#!    m /usr/bin/strace /bin

#!  gdb:
#!    m /usr/bin/gdb /bin/gdb

  readline:
    /lib*/libreadline.so*
    /lib*/libhistory.so*

  ncurses:
    /lib*/libncurses.so.5*

  procps:
    /bin/ps

  psmisc:
    /bin/fuser
    m /usr/bin/killall /bin
    m /usr/bin/pstree /bin

  coreutils:
    m /usr/bin/head /bin
    m /usr/bin/tail /bin

  util-linux:
    /bin/mount
    /bin/umount

  glibc:
    /lib*/librt{.,-}*
    /lib*/libpthread{.,-}*

  linuxrc-debuginfo:
    /

if 0
  if with_gdb == 2

    linuxrc:
      m /usr/sbin/linuxrc /bin/linuxrc

      e echo -e "#! /bin/sh\nexport PATH=/bin:/sbin:/lbin\nPS1=\\\\\\w\>\n/bin/bash\n" >linuxrc

  endif

  if with_gdb == 3

    linuxrc:
      m /usr/sbin/linuxrc /bin/linuxrc

      e echo run >zap
      e echo -e "#! /bin/sh\ngdb --command /zap /bin/linuxrc" >linuxrc

  endif
endif
##endif

glibc:
  /lib*/ld*
  /lib*/libc{.,-}*
  /lib*/{libcrypt,libdl,libnsl,libresolv}{.,-}*
  /lib*/{libnss_compat,libnss_dns,libnss_files,libnss_hesiod}{.,-}*
  /lib*/libm{.,-}*
#!  /lib*/libthread_db{.,-}*
  /lib*/libutil{.,-}*

cifs-mount:
  /sbin/mount.cifs

sysfsutils:
  /lib*/libsysfs.so.*

dbus-1:
  /usr/lib*/libdbus-1.so.*

hal:
  /usr/lib*/libhal.so.*

hwinfo-devel:
  /usr/lib*/libhd_tiny.so.*

##if arch eq 'ia32' || arch eq 'x86_64'

  bootsplash:
    /sbin/splash

    d /etc/bootsplash/themes/Zen
##    e cp -a /Zen/animations etc/bootsplash/themes/Zen

##endif

zlib:
  /lib*/libz.so.1*

coreutils:
  /bin/rm
  /bin/sleep
  /bin/cat

pcmciautils:
  /etc/pcmcia/config.opts
  /sbin/pcmcia-socket-startup

bash:
  /bin/{sh,bash}
  s bash /bin/lsh
  s bash /bin/ash

readline:
  /lib*/libreadline.so*
  /lib*/libhistory.so*

ncurses:
  /lib*/libncurses.so.5*

portmap:
  /sbin/portmap

tcpd:
  /lib*/libwrap.so.*

dhcpcd:
  /sbin/dhcpcd

iputils:
  /bin/ping

net-tools:
  /sbin/ifconfig
  /sbin/route

iproute2:
  /sbin/ip

ethtool:
  m /usr/sbin/ethtool /sbin

qlogic-firmware:
  /lib/firmware

open-iscsi:
  # must be writable
  /etc/iscsid.conf
  c 644 0 0 /etc/iscsid.conf

cpio:
  /bin/cpio

util-linux:
  /bin/more

# add udev
libvolume_id:
  /lib*/libvolume_id.so*

udev:
  /etc
  /lib/udev
  /sbin
  /usr/bin
  /usr/sbin
x etc/myudevstart /bin
  # add some md devices statically
  b 9  0 /lib/udev/devices/md0
  b 9  1 /lib/udev/devices/md1
  b 9  2 /lib/udev/devices/md2
  b 9  3 /lib/udev/devices/md3
  b 9  4 /lib/udev/devices/md4
  b 9  5 /lib/udev/devices/md5
  b 9  6 /lib/udev/devices/md6
  b 9  7 /lib/udev/devices/md7
  b 9  8 /lib/udev/devices/md8
  b 9  9 /lib/udev/devices/md9
  b 9 10 /lib/udev/devices/md10
  b 9 11 /lib/udev/devices/md11
  b 9 12 /lib/udev/devices/md12
  b 9 13 /lib/udev/devices/md13
  b 9 14 /lib/udev/devices/md14
  b 9 15 /lib/udev/devices/md15


sysvinit:
  /sbin/{halt,reboot,shutdown,showconsole,setconsole}
  c 755 0 0 /sbin/showconsole
  /bin/usleep


util-linux:
  /etc
  r /etc/init.d/nfsboot
  /bin/{mount,umount,guessfstype}
#dmesg,
  /sbin/hwclock
  /sbin/{blockdev,ctrlaltdel,elvtune,fdisk,losetup,mkfs,mkfs.bfs,mkswap,pivot_root,swapon,swapoff}
  /sbin/agetty
  /usr/{bin,sbin}
  c 755 0 0 /usr/sbin/klogconsole
gpm:
  /etc/*
  /usr/bin/*
  /usr/sbin/*
  /usr/lib/*

# see etc/module.list
  e echo "Zen:		2" >>linuxrc.config
  e echo "SetupCmd:	"\""setctsid \`showconsole\` /bin/bash -c zenworks.s"\" >>linuxrc.config

  e echo "KernelPCMCIA:	1" >>linuxrc.config

e echo "UseUSBSCSI:	1" >>linuxrc.config
e echo "Product:	<product_name>" >>linuxrc.config
e echo "UpdateDir:	<update_dir>" >>linuxrc.config

e echo "MemLoadImage:	60000" >>linuxrc.config

  e echo "MinMemory:	<min_memory>" >>linuxrc.config


e echo "MemYaST:	2000" >>linuxrc.config
e echo "MemYaSTText:	2000" >>linuxrc.config
#  e echo "NetSetup:	dhcp" >>linuxrc.config
e echo "ScsiRename=0" >>linuxrc.config
e echo "ScsiBeforeUsb=1" >>linuxrc.config

